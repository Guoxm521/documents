(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{298:function(t,s,a){"use strict";a.r(s);var r=a(10),e=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"一、安装docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、安装docker"}},[t._v("#")]),t._v(" 一、安装Docker")]),t._v(" "),s("h3",{attrs:{id:"_1-windows"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-windows"}},[t._v("#")]),t._v(" 1.windows")]),t._v(" "),s("p",[t._v("在Windows下，docker是默认安装在C盘之下的，")]),t._v(" "),s("p",[t._v("首先使用mklink 进行联接：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("C:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Windows"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("system3"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),t._v("mklink /J "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\Program Files\\Docker"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:\\Program Files\\Docker"')]),t._v("\n")])])]),s("p",[t._v("运行结果如下：")]),t._v(" "),s("p",[s("code",[t._v("C:\\Program Files\\Docker是Docker")]),t._v("的默认安装位置，"),s("code",[t._v("D:\\Program Files\\Docker")]),t._v("是你希望它安装的位置，一旦设立了联接，Docker的安装器会以为它安装在了"),s("code",[t._v("C:\\Program Files\\Docker")]),t._v("但实际上所有文件都被安装在了"),s("code",[t._v("D:\\Program Files\\Docker")])]),t._v(" "),s("p",[t._v("注1：希望它安装的位置可以是任意硬盘上已有的盘符，但是C:\\Program Files里不能有Docker文件夹否则会出现文件夹已存在的警告并联接失败。\n注2：需要在管理员模式下运行。")]),t._v(" "),s("h3",{attrs:{id:"_2-linux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-linux"}},[t._v("#")]),t._v(" 2.linux")]),t._v(" "),s("p",[t._v("安装我们直接使用"),s("code",[t._v("shell")]),t._v("脚本来进行安装，安装脚本的地址如下   "),s("code",[t._v("get.docker.com")])]),t._v(" "),s("p",[t._v("可以直接使用curl命令下载这个shell脚本")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[t._v("curl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("fsSL get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("docker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("o get"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("docker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sh\n")])])]),s("p",[t._v("执行shell脚本")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[t._v("sh get"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("docker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sh\n")])])]),s("p",[t._v("回车后就开始安装Docker了。这里需要注意，如果你不是"),s("code",[t._v("root")]),t._v("用户，是需要使用"),s("code",[t._v("sudo")]),t._v("命令或者给用户sudo权限。")]),t._v(" "),s("p",[t._v("安装过程大概要3-4分钟左右，也是主要看网速和服务器性能。")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://jspang.com/detailed?id=75#toc312",target:"_blank",rel:"noopener noreferrer"}},[t._v("检测是否安装成功"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("安装完成后，依然通过"),s("code",[t._v("docker version")]),t._v("命令检查是否安装成功。")]),t._v(" "),s("p",[t._v("如果只显示下面的这些信息，也就是只启动了客户端"),s("code",[t._v("Client")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Client")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Docker Engine "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" Community\n "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Version")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("           "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20.10")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v(".7")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.41")]),t._v("\n Go version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("        go1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13.15")]),t._v("\n Git commit"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("        f0df350\n "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Built")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("             Wed Jun  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("58")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Arch"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("           linux"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("amd64\n "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Context")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("           "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Experimental")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\nCannot connect to the Docker daemon at unix"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//var/run/docker.sock. Is the docker daemon running?")]),t._v("\n")])])]),s("p",[t._v("这时候要使用"),s("code",[t._v("systemctl start")]),t._v("命令，开启Docker服务端。")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[t._v("sudo systemctl start docker\n")])])]),s("p",[t._v("开启后，再使用"),s("code",[t._v("sudo docker version")]),t._v("来看一下，如果有类似下面的信息，说明已经安装成功了。")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Client")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Docker Engine "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" Community\n "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Version")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("           "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20.10")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v(".7")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.41")]),t._v("\n Go version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("        go1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13.15")]),t._v("\n Git commit"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("        f0df350\n "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Built")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("             Wed Jun  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("58")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Arch"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("           linux"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("amd64\n "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Context")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("           "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Experimental")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Server")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Docker Engine "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" Community\n "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Engine")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Version")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20.10")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v(".7")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.41")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("minimum version "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.12")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  Go version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("       go1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13.15")]),t._v("\n  Git commit"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("       b0f5bc3\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Built")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("            Wed Jun  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("56")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("35")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Arch"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("          linux"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("amd64\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Experimental")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("containerd")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Version")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.4")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v(".8")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("GitCommit")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("        7eba5930496d9bbe375fdf71603e610ad737d2b2\n "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("runc")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Version")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("GitCommit")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("        v1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("g84113ee\n docker"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Version")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.19")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("GitCommit")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("        de40ad0\n")])])]),s("h2",{attrs:{id:"二、创建容器的相关命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、创建容器的相关命令"}},[t._v("#")]),t._v(" 二、创建容器的相关命令")]),t._v(" "),s("h3",{attrs:{id:"创建容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建容器"}},[t._v("#")]),t._v(" 创建容器")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[t._v("docker container run "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" image name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("h3",{attrs:{id:"查看容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看容器"}},[t._v("#")]),t._v(" 查看容器")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[t._v("docker container ls     或者 docker container ps\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CONTAINER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 容器对应的"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),t._v("，这个是唯一的\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IMAGE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 使用的镜像名称，显示不同\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMAND")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 执行的相关命令\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CREATED")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 创建的时间\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STATUS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 目前镜像的状态，一般会有两种状态Up和Exited"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PORTS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 协议和端口\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NAMES")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 容器的名称，名字是Docker随机生成的\n")])])]),s("h3",{attrs:{id:"停止容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#停止容器"}},[t._v("#")]),t._v(" 停止容器")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[t._v("docker container stop "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("or")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("   停止单个容器\ndocker container stop  ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ID1")])]),t._v("  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ID2")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ID3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v(" 停止多个容器\n")])])])]),s("h3",{attrs:{id:"删除容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除容器"}},[t._v("#")]),t._v(" 删除容器")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[t._v("docker container rm "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("or")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n")])])])]),s("h3",{attrs:{id:"简写命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简写命令"}},[t._v("#")]),t._v(" 简写命令")]),t._v(" "),s("ul",[s("li",[t._v("容器的创建："),s("code",[t._v("docker container run nginx")]),t._v(" 简写方法 "),s("code",[t._v("docker run nginx")])]),t._v(" "),s("li",[t._v("容器的列出(up): "),s("code",[t._v("docker container ls")]),t._v(" 简写方法"),s("code",[t._v("docker ps")])]),t._v(" "),s("li",[t._v("容器的列出（up和exit）："),s("code",[t._v("docker container ls -a")]),t._v(" 简写方法"),s("code",[t._v("docker ps -a")])]),t._v(" "),s("li",[t._v("容器的停止 ："),s("code",[t._v("docker container stop")]),t._v("简写方法 "),s("code",[t._v("docker stop")])]),t._v(" "),s("li",[t._v("容器的删除："),s("code",[t._v("docker container rm")]),t._v(" 简写方法"),s("code",[t._v("docker rm")])]),t._v(" "),s("li",[t._v("容器重命名 "),s("code",[t._v("docker rename [old_name|container ID] Information-platform-demo")])])]),t._v(" "),s("h3",{attrs:{id:"查看所有的容器id"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看所有的容器id"}},[t._v("#")]),t._v(" 查看所有的容器ID")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[t._v("docker container ps "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("aq\n")])])]),s("h4",{attrs:{id:"组合功能-删除多个容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#组合功能-删除多个容器"}},[t._v("#")]),t._v(" 组合功能  删除多个容器")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[t._v("docker container rm "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("docker container ps "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("aq"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"端口映射"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#端口映射"}},[t._v("#")]),t._v(" 端口映射")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("docker container run "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("p "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v(" nginx\n")])])]),s("p",[t._v("第一个端口是映射到服务器本机的端口;第二个端口是Docker容器使用的端口。 比如你想把Docker的80端口，映射到服务器的90端口。")]),t._v(" "),s("h3",{attrs:{id:"运行模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#运行模式"}},[t._v("#")]),t._v(" 运行模式")]),t._v(" "),s("blockquote",[s("p",[t._v("attached模式在前台运行，detached模式在后台运行。")])]),t._v(" "),s("h4",{attrs:{id:"attached模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#attached模式"}},[t._v("#")]),t._v(" attached模式")]),t._v(" "),s("p",[t._v("当你打开"),s("code",[t._v("127.0.0.1")]),t._v("网址的时候，"),s("code",[t._v("PowerShell")]),t._v("上打印出了相关的日志（log），平且每访问一次，都会增加一条日志。也就是说Docker容器的日志会实时的展现到窗口并且占用此端口。这种模式叫做"),s("code",[t._v("attached")]),t._v("模式。")]),t._v(" "),s("p",[t._v("在windows系统下并不是一个完整的attached模式，只是帮我们打印出了Log。现在到Linux服务器上，这时候你按"),s("code",[t._v("Ctrl+C")]),t._v(",就会停止掉"),s("code",[t._v("Docker")]),t._v("服务。而现实中我们工作的环境恰恰是这种Linux环境。")]),t._v(" "),s("p",[t._v("也就是在Linux上你的操作命令，会直接传递个"),s("code",[t._v("Docker容器")]),t._v("。")]),t._v(" "),s("p",[t._v("attached模式更适用于容器和程序的调试阶段。")]),t._v(" "),s("h4",{attrs:{id:"detached模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#detached模式"}},[t._v("#")]),t._v(" detached模式")]),t._v(" "),s("p",[s("code",[t._v("detached模式")]),t._v("的开启方法，就是加一个参数"),s("code",[t._v("-d")]),t._v("或者"),s("code",[t._v("--detach")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[t._v("docker run "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("d "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("p "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v(" nginx\n")])])]),s("p",[s("code",[t._v("detached模式转换attached模式")])]),t._v(" "),s("p",[t._v("在运行之后，也有需要调试的时候，Docker提供了两个模式间的转换。比如现在要把"),s("code",[t._v("detached")]),t._v("模式的容器，改为"),s("code",[t._v("attched")]),t._v("模式。")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[t._v("docker  attach "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ID")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("or")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("Image")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("Name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n")])])])]),s("h4",{attrs:{id:"查看日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看日志"}},[t._v("#")]),t._v(" 查看日志")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[t._v("docker container logs "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ID")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("or")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("Image")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n")])])])]),s("p",[t._v("追踪日志")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[t._v("docker container logs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("f "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ID")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("or")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("Image")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n")])])])]),s("h3",{attrs:{id:"docker导出、导入镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker导出、导入镜像"}},[t._v("#")]),t._v(" docker导出、导入镜像")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//导出")]),t._v("\ndocker image save\ndocker image save busybox"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("latest "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("o mybusybox"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//导入")]),t._v("\ndocker image load "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("i "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\\mybusybox"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image\n")])])]),s("h2",{attrs:{id:"三、实际操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、实际操作"}},[t._v("#")]),t._v(" 三、实际操作")]),t._v(" "),s("h3",{attrs:{id:"使用nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用nginx"}},[t._v("#")]),t._v(" 使用nginx")]),t._v(" "),s("p",[t._v("命令：")]),t._v(" "),s("div",{staticClass:"language-nginx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nginx"}},[s("code",[t._v("一：\ndocker run --name nginx -p 80:80 -v /home/docker-nginx/nginx.conf:/etc/nginx/nginx.conf -v /home/docker-nginx/log:/var/log/nginx -v /home/docker-nginx/conf.d/default.conf:/etc/nginx/conf.d/default.conf -d nginx\n二：\ndocker run --name nginx -p 80:80 \n\t-v $PWD/nginx.conf:/etc/nginx/nginx.conf\n            -v  $PWD/html:/html  \n            -v $PWD/logs:/var/log/nginx \n            -v $PWD/conf.d/default.conf:/etc/nginx/conf.d/default.conf \n            -d nginx\n")])])]),s("p",[t._v("nginx项目配置：")]),t._v(" "),s("p",[t._v("注意："),s("code",[t._v("nginx.conf")]),t._v("配置文件映射到"),s("code",[t._v("docker")]),t._v("容器内部，"),s("code",[t._v("server")]),t._v("中的"),s("code",[t._v("root")]),t._v("路径配置也是相对与容器内部的，所以这里直接将"),s("code",[t._v("html")]),t._v("路径映射到容器的根目录")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("    server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name  demo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gxming"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        charset utf"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n        location "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            root   "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("demo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("web"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            index  index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("htm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        error_page   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("502")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("503")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("504")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("50x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        location "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("50x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            root   html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name  api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gxming"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        charset utf"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        location "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            root   "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("demo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            index  index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("htm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        error_page   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("502")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("503")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("504")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("50x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        location "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("50x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            root   html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("解释下上面的命令：")]),t._v(" "),s("p",[t._v("--name 给你启动的容器起个名字，以后可以使用这个名字启动或者停止容器")]),t._v(" "),s("p",[t._v("-p 映射端口，将docker宿主机的80端口和容器的80端口进行绑定")]),t._v(" "),s("p",[t._v("-v 挂载文件用的，第一个-v 表示将你本地的nginx.conf覆盖你要起启动的容器的nginx.conf文件，第二个表示将日志文件进行挂载，就是把nginx服务器的日志写到你docker宿主机的/home/docker-nginx/log/下面")]),t._v(" "),s("p",[s("strong",[t._v("nginx容器  代理到宿主机服务")])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("在安装Docker的时候，会在宿主机安装一个虚拟网关 docker0，查询docker0的IP地址")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("ip addr show docker0\n")])])])]),t._v(" "),s("li",[s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("# 注意 upstream 没有http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 这里的ip就是上面对于docker来说宿主机的ip\n upstream music "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        server "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.17")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v(".1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        # 如果由域名配置为域名即可，如果没有域名配置为本机ip地址\n        # 如果想要外部访问就配置为本机的外网ip\n        server_name xx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        location "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            proxy_set_header Host $host"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("$server_port"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            proxy_set_header "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("X")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Real"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Ip $remote_addr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            proxy_set_header "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("X")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Forwarded"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("For $proxy_add_x_forwarded_for"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            # 这里就是上面的upstream\n            proxy_pass http"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("music"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"安装mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装mysql"}},[t._v("#")]),t._v(" 安装mysql")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("docker search mysql")]),t._v(" 查询mysql")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("docker pull mysql")]),t._v("  拉去镜像  ，也可以指定版本镜像"),s("code",[t._v("docker pull mysql:8.0.27")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("docker images")]),t._v("  查看镜像")])]),t._v(" "),s("li",[s("p",[t._v("在opt目录下创建新文件夹")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("命令：cd /opt/\n命令：mkdir mysql_docker\n命令：cd mysql_docker/\n命令：echo "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PWD")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("启动mysql容器")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("docker run --name mysqlDemoServer -v $PWD/conf:/etc/mysql/conf.d -v $PWD/logs:/logs -v $PWD/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 -d -i -p 3306:3306 mysql:latest\n")])])]),s("table",[s("thead",[s("tr",[s("th",[t._v("Options")]),t._v(" "),s("th",[t._v("Mean")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("-i")]),t._v(" "),s("td",[t._v("以交互模式运行容器，通常与 -t 同时使用；")])]),t._v(" "),s("tr",[s("td",[t._v("-t")]),t._v(" "),s("td",[t._v("为容器重新分配一个伪输入终端，通常与 -i 同时使用；")])]),t._v(" "),s("tr",[s("td",[t._v("-d")]),t._v(" "),s("td",[t._v("后台运行容器，并返回容器ID；")])])])])]),t._v(" "),s("li",[s("p",[t._v("进入mysql 容器 ，并登入mysql")]),t._v(" "),s("p",[s("code",[t._v("命令：")]),s("strong",[t._v("docker exec -it mysqlserver bash")])]),t._v(" "),s("p",[s("code",[t._v("命令：")]),s("strong",[t._v("mysql -uroot -p")])])]),t._v(" "),s("li",[s("p",[t._v("开启远程访问权限")]),t._v(" "),s("blockquote",[s("p",[t._v("须先到服务器开启3306端口")])]),t._v(" "),s("p",[s("code",[t._v("命令：")]),s("strong",[t._v("use mysql;")])]),t._v(" "),s("p",[s("code",[t._v("命令：")]),s("strong",[t._v("select host,user from user;")])]),t._v(" "),s("p",[s("code",[t._v("命令：")]),s("strong",[t._v("ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';")])]),t._v(" "),s("p",[s("code",[t._v("命令：")]),s("strong",[t._v("flush privileges;")])])]),t._v(" "),s("li",[s("p",[t._v("查看日志 "),s("strong",[t._v("docker logs -f --tail 10 a4dac74d48f7")])])]),t._v(" "),s("li",[s("p",[t._v("查看进程 "),s("strong",[t._v("docker ps -a")])])]),t._v(" "),s("li",[s("p",[t._v("重启docker "),s("strong",[t._v("systemctl restart docker")])])]),t._v(" "),s("li",[s("p",[t._v("查看docker是否启动成功 "),s("strong",[t._v("ps -ef|grep docker")])])]),t._v(" "),s("li",[s("p",[t._v("关闭docker "),s("strong",[t._v("systemctl stop docker")])])])]),t._v(" "),s("h3",{attrs:{id:"安装redis"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装redis"}},[t._v("#")]),t._v(" 安装redis")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[t._v("docker run "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("p "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6379")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6379")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("name redis "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v $"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PWD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("redis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("redis"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("redis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v $"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PWD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("d redis redis"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("server "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("redis"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("redis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("appendonly yes\n")])])]),s("h2",{attrs:{id:"四、构建镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、构建镜像"}},[t._v("#")]),t._v(" 四、构建镜像")])])}),[],!1,null,null,null);s.default=e.exports}}]);