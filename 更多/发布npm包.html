<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>目录结构 | 胡萝卜菜</title>
    <meta name="generator" content="VuePress 1.8.3">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.c026dc41.css" as="style"><link rel="preload" href="/assets/js/app.b1ce733a.js" as="script"><link rel="preload" href="/assets/js/2.d1445b21.js" as="script"><link rel="preload" href="/assets/js/26.ead5d5b8.js" as="script"><link rel="prefetch" href="/assets/js/10.778bd6f6.js"><link rel="prefetch" href="/assets/js/11.2951b4af.js"><link rel="prefetch" href="/assets/js/12.f2559d91.js"><link rel="prefetch" href="/assets/js/13.c1eb8736.js"><link rel="prefetch" href="/assets/js/14.5f8f15b4.js"><link rel="prefetch" href="/assets/js/15.55725e2a.js"><link rel="prefetch" href="/assets/js/16.8bedb973.js"><link rel="prefetch" href="/assets/js/17.288e644b.js"><link rel="prefetch" href="/assets/js/18.a76f07b1.js"><link rel="prefetch" href="/assets/js/19.58468d93.js"><link rel="prefetch" href="/assets/js/20.0acbc961.js"><link rel="prefetch" href="/assets/js/21.99b0cd93.js"><link rel="prefetch" href="/assets/js/22.177a025c.js"><link rel="prefetch" href="/assets/js/23.7faae971.js"><link rel="prefetch" href="/assets/js/24.7d12d0e8.js"><link rel="prefetch" href="/assets/js/25.25bb055e.js"><link rel="prefetch" href="/assets/js/27.752298ac.js"><link rel="prefetch" href="/assets/js/3.04c27746.js"><link rel="prefetch" href="/assets/js/4.0c94cad7.js"><link rel="prefetch" href="/assets/js/5.93d7c811.js"><link rel="prefetch" href="/assets/js/6.b4718be8.js"><link rel="prefetch" href="/assets/js/7.217eeae5.js"><link rel="prefetch" href="/assets/js/8.54af50e0.js"><link rel="prefetch" href="/assets/js/9.99cb2e75.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c026dc41.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="胡萝卜菜" class="logo"> <span class="site-name can-hide">胡萝卜菜</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页🎈
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端🐱‍👓" class="dropdown-title"><span class="title">前端🐱‍👓</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端🐱‍👓" class="mobile-dropdown-title"><span class="title">前端🐱‍👓</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/前端/vue/" class="nav-link">
  vue笔记🤷‍♂️
</a></li><li class="dropdown-item"><!----> <a href="/前端/Javascript/" class="nav-link">
  JavaScript笔记🤦‍♀️
</a></li><li class="dropdown-item"><!----> <a href="/前端/Css/css常用命名.html" class="nav-link">
  Css😢
</a></li></ul></div></div><div class="nav-item"><a href="/更多/Canvas.html" class="nav-link">
  更多🐱‍🏍
</a></div><div class="nav-item"><a href="/收藏/" class="nav-link">
  收藏❤
</a></div> <a href="https://github.com/Guoxm521/documents" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页🎈
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端🐱‍👓" class="dropdown-title"><span class="title">前端🐱‍👓</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端🐱‍👓" class="mobile-dropdown-title"><span class="title">前端🐱‍👓</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/前端/vue/" class="nav-link">
  vue笔记🤷‍♂️
</a></li><li class="dropdown-item"><!----> <a href="/前端/Javascript/" class="nav-link">
  JavaScript笔记🤦‍♀️
</a></li><li class="dropdown-item"><!----> <a href="/前端/Css/css常用命名.html" class="nav-link">
  Css😢
</a></li></ul></div></div><div class="nav-item"><a href="/更多/Canvas.html" class="nav-link">
  更多🐱‍🏍
</a></div><div class="nav-item"><a href="/收藏/" class="nav-link">
  收藏❤
</a></div> <a href="https://github.com/Guoxm521/documents" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/更多/Canvas.html" class="sidebar-link">Canvas</a></li><li><a href="/更多/杂七杂八.html" class="sidebar-link">杂七杂八</a></li><li><a href="/更多/Git操作.html" class="sidebar-link">Git操作</a></li><li><a href="/更多/发布npm包.html" class="active sidebar-link">发布npm包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/更多/发布npm包.html#目录结构" class="sidebar-link">目录结构</a></li><li class="sidebar-sub-header"><a href="/更多/发布npm包.html#发布组件" class="sidebar-link">发布组件</a></li><li class="sidebar-sub-header"><a href="/更多/发布npm包.html#参考" class="sidebar-link">参考</a></li></ul></li><li><a href="/更多/docker学习.html" class="sidebar-link">docker学习</a></li><li><a href="/更多/MySQL.html" class="sidebar-link">MySQL</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="目录结构"><a href="#目录结构" class="header-anchor">#</a> 目录结构</h2> <p>首先需要配置<code>vue-cli</code>环境,构建一个<code>vue</code>项目，并搭建相应的目录结构</p> <p><img src="https://gxming.oss-cn-shenzhen.aliyuncs.com/my_study_notesimage-20211106165158556.png" alt="image-20211106165158556"></p> <p>将所有的组件放在了<code>gxm_ui</code>文件夹  这样为了更好的区分</p> <ol><li><p><code>packages</code>  为<code>vue</code>的组件  一个文件夹就是一个单独的组件,文件夹内含一个<code>main.vue</code>和<code>index.js</code>文件</p> <p><img src="https://gxming.oss-cn-shenzhen.aliyuncs.com/my_study_notesimage-20211106165645328.png" alt="image-20211106165645328"></p></li> <li><p><code>src</code> 放着 <code>npm</code>组件的路口,向外暴露一个<code>vue</code>的install方法</p></li></ol> <p><img src="C:%5CUsers%5Cgxm%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20211106165759094.png" alt="image-20211106165759094"></p> <p>注意：这里有个问题，这里参考了elementui组件的写法，同时导出单个组件，和全部组件的install 方法，来实现按需引入 或全部引入，但是在导入组件时 只能 如下方法一   一次性导入，而不能如方法二对导出的对象进行解构</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>方法一 ：    <span class="token keyword">import</span> gxm_ui <span class="token keyword">from</span> <span class="token string">'gxm_ui'</span>
方法二：    <span class="token keyword">import</span> <span class="token punctuation">{</span> HelloUi <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;gxm_ui&quot;</span>
</code></pre></div><p>参考文章:https://www.jb51.net/article/162079.htm</p> <h2 id="发布组件"><a href="#发布组件" class="header-anchor">#</a> 发布组件</h2> <h3 id="组件配置"><a href="#组件配置" class="header-anchor">#</a> 组件配置</h3> <p>在组件文件目录下 初始化一个<code>package.json</code>,然后在 <code>package.json</code> 里面添加一些npm包发布的相关信息，比如作者、版本等</p> <p><img src="https://gxming.oss-cn-shenzhen.aliyuncs.com/my_study_notesimage-20211106170222216.png" alt="image-20211106170222216"></p> <p>在组件库当中使用到的第三方依赖，添加在<code>dependencies</code>当中，当安装组件的时候也会想对应的下载第三方依赖</p> <h3 id="发布到npm"><a href="#发布到npm" class="header-anchor">#</a> 发布到Npm</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>将源切换成npm官方源,这点非常重要
<span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry http://registry.npmjs.org/
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>首先登陆npm账号 <span class="token function">npm</span> login
添加用户信息   <span class="token function">npm</span> adduser
发布远程   <span class="token function">npm</span> publish


如果要删除我们发的包,在2小时之内是可以删除的
删除远程仓库的包
npx force-unpublish package-name <span class="token string">'原因描述'</span>
</code></pre></div><p>注意：每次更新组件都需要更新组件上的版本号</p> <h3 id="上传到gitee"><a href="#上传到gitee" class="header-anchor">#</a> 上传到gitee</h3> <p>将上面组件文件夹<code>gxm_ui</code>单独上传在gitee仓库，上传仓库的组件也需要遵循上面的配置，此后我们就可以通过从gitee上面拉去组件库，这个方法适合构建公司当中私有的组件仓库，</p> <p>当仓库为公开的时候 可以直接拉去</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span>  git+https://gitee.com/gxmingcode/gxm_ui_test
</code></pre></div><p>npm 所支持的协议</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>protocol<span class="token operator">&gt;</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token punctuation">[</span><span class="token operator">&lt;</span>user<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token operator">:</span><span class="token operator">&lt;</span>password<span class="token operator">&gt;</span><span class="token punctuation">]</span>@<span class="token punctuation">]</span><span class="token operator">&lt;</span>hostname<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token operator">:</span><span class="token operator">&lt;</span>port<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">:</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">/</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>path<span class="token operator">&gt;</span><span class="token punctuation">[</span>#<span class="token operator">&lt;</span>commit<span class="token operator">-</span>ish<span class="token operator">&gt;</span> <span class="token operator">|</span> #semver<span class="token operator">:</span><span class="token operator">&lt;</span>semver<span class="token operator">&gt;</span><span class="token punctuation">]</span>
</code></pre></div><blockquote><p><code>&lt;protocol&gt;</code> is one of git, git+ssh, git+http, git+https, or git+file.</p></blockquote> <p>即 protocol 支持 git, git+ssh, git+http, git+https, git+file，私有仓库需要用户名和密码时需要填写用户名和密码，semver 表示需要使用的版本号, 不过貌似不生效。（npm 中有个包 semver 是专门用于比较包的版本号大小）</p> <p>直接写 #branch 表示需要安装的分支号。</p> <p>所以在开发过程中我们可以这么写包：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i git+https://gitee.com/gxmingcode/gxm_ui_test<span class="token comment">#master</span>
</code></pre></div><p>或者使用打的 tag</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i git+https://gitee.com/gxmingcode/gxm_ui_test<span class="token comment">#1.0.0</span>
</code></pre></div><h3 id="可能存在的问题"><a href="#可能存在的问题" class="header-anchor">#</a> 可能存在的问题</h3> <p>由于新版的 npm install 在安装时会使用 package-lock.json, 有时候同一分支不会从 github 上拉取最新的，
可能需要手动再安装一下(拿自己的仓库试了下，果然不会更新)，所以安装时尽量以 tag 为标签进行安装，这样确保代码是正确的</p> <p>此外，由于私有仓库都是需要密码的，这个时候需要提供一个公共账号和密码，某种程度上不利于管理吧</p> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <p><a href="https://blog.csdn.net/sunxiaoju/article/details/86413132" target="_blank" rel="noopener noreferrer">从码云上通过git安装私有npm包<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2021/11/06 星期六  09:39:03</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/更多/Git操作.html" class="prev">
        Git操作
      </a></span> <span class="next"><a href="/更多/docker学习.html">
        docker学习
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.b1ce733a.js" defer></script><script src="/assets/js/2.d1445b21.js" defer></script><script src="/assets/js/26.ead5d5b8.js" defer></script>
  </body>
</html>
